import{getNotFound as ye}from"./@qwik-city-not-found-paths.js";import{isStaticPath as we}from"./@qwik-city-static-paths.js";import{_ as Se,a as be,v as Re,q as _e}from"./assets/@qwik-city-plan-e437d9bd.js";import{s as Ae,r as xe,m as Te}from"./assets/entry.ssr-90db960b.js";var ne=class extends Error{constructor(e,t){super(t),this.status=e}};function ke(e,t){let r="Server Error";return t!=null&&(typeof t.message=="string"?r=t.message:r=String(t)),"<html>"+ae(e,r)+"</html>"}function ae(e,t){typeof e!="number"&&(e=500),typeof t=="string"?t=De(t):t="";const r=typeof t=="string"?"600px":"300px",n=e>=500?Pe:Me;return`
<head>
  <meta charset="utf-8">
  <meta http-equiv="Status" content="${e}">
  <title>${e} ${t}</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body { color: ${n}; background-color: #fafafa; padding: 30px; font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, Roboto, sans-serif; }
    p { max-width: ${r}; margin: 60px auto 30px auto; background: white; border-radius: 4px; box-shadow: 0px 0px 50px -20px ${n}; overflow: hidden; }
    strong { display: inline-block; padding: 15px; background: ${n}; color: white; }
    span { display: inline-block; padding: 15px; }
  </style>
</head>
<body><p><strong>${e}</strong> <span>${t}</span></p></body>
`}var Ce=/[&<>]/g,De=e=>e.replace(Ce,t=>{switch(t){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";default:return""}}),Me="#006ce9",Pe="#713fc2",We={lax:"Lax",none:"None",strict:"Strict"},Ne={seconds:1,minutes:1*60,hours:1*60*60,days:1*60*60*24,weeks:1*60*60*24*7},ve=(e,t,r)=>{const n=[`${e}=${t}`];typeof r.domain=="string"&&n.push(`Domain=${r.domain}`),typeof r.maxAge=="number"?n.push(`Max-Age=${r.maxAge}`):Array.isArray(r.maxAge)?n.push(`Max-Age=${r.maxAge[0]*Ne[r.maxAge[1]]}`):typeof r.expires=="number"||typeof r.expires=="string"?n.push(`Expires=${r.expires}`):r.expires instanceof Date&&n.push(`Expires=${r.expires.toUTCString()}`),r.httpOnly&&n.push("HttpOnly"),typeof r.path=="string"&&n.push(`Path=${r.path}`);const a=$e(r.sameSite);return a&&n.push(`SameSite=${a}`),r.secure&&n.push("Secure"),n.join("; ")};function X(e){try{return decodeURIComponent(e)}catch{return e}}var Oe=e=>{const t={};if(typeof e=="string"&&e!==""){const r=e.split(";");for(const n of r){const a=n.indexOf("=");a!==-1&&(t[X(n.slice(0,a).trim())]=X(n.slice(a+1).trim()))}}return t};function $e(e){if(e===!0)return"Strict";if(e===!1)return"None";if(e)return We[e]}var k=Symbol("request-cookies"),U=Symbol("response-cookies"),_=Symbol("live-cookies"),ie,se,Ie=class{constructor(e){this[ie]={},this[se]={},this[k]=Oe(e),this[_]={...this[k]}}get(e,t=!0){const r=this[t?_:k][e];return r?{value:r,json(){return JSON.parse(r)},number(){return Number(r)}}:null}getAll(e=!0){return Object.keys(this[e?_:k]).reduce((t,r)=>(t[r]=this.get(r),t),{})}has(e,t=!0){return!!this[t?_:k][e]}set(e,t,r={}){this[_][e]=typeof t=="string"?t:JSON.stringify(t);const n=typeof t=="string"?t:encodeURIComponent(JSON.stringify(t));this[U][e]=ve(e,n,r)}delete(e,t){this.set(e,"deleted",{...t,maxAge:0}),this[_][e]=null}headers(){return Object.values(this[U])}};ie=U,se=_;var Le=(e,t)=>{const r=t.headers();if(r.length>0){const n=new Headers(e);for(const a of r)n.append("Set-Cookie",a);return n}return e},j=class{},P=class extends j{},J=new WeakMap,K="qaction",He="qfunc";function Qe(e){const{url:t,params:r,request:n,status:a,locale:i}=e,o={};n.headers.forEach((y,w)=>o[w]=y);const s=e.sharedMap.get($),l=e.sharedMap.get(he),c=e.sharedMap.get(de),u=e.sharedMap.get(et),d=e.request.headers,m=new URL(t.pathname+t.search,t),h=d.get("X-Forwarded-Host"),g=d.get("X-Forwarded-Proto");return h&&(m.port="",m.host=h),g&&(m.protocol=g),{url:m.href,requestHeaders:o,locale:i(),nonce:u,containerAttributes:{"q:route":c},qwikcity:{routeName:c,ev:e,params:{...r},loadedRoute:rt(e),response:{status:a(),loaders:I(e),action:s,formData:l}}}}var ze=(e,t,r,n,a)=>{const i=[],o=[],s=[],l=!!(t&&Je(t[2]));if(e&&G(i,o,s,e,l,r),t){const c=t[0];n&&(r==="POST"||r==="PUT"||r==="PATCH"||r==="DELETE")&&s.unshift(Ke),l&&(r==="POST"&&s.push(Fe),s.push(Be),s.push(Ye)),s.push(Ve),G(i,o,s,t[2],l,r),l&&(s.push(u=>{u.sharedMap.set(de,c)}),s.push(Ue(i,o)),s.push(a))}return s},G=(e,t,r,n,a,i)=>{for(const o of n){typeof o.onRequest=="function"?r.push(o.onRequest):Array.isArray(o.onRequest)&&r.push(...o.onRequest);let s;switch(i){case"GET":{s=o.onGet;break}case"POST":{s=o.onPost;break}case"PUT":{s=o.onPut;break}case"PATCH":{s=o.onPatch;break}case"DELETE":{s=o.onDelete;break}case"OPTIONS":{s=o.onOptions;break}case"HEAD":{s=o.onHead;break}}if(typeof s=="function"?r.push(s):Array.isArray(s)&&r.push(...s),a){const l=Object.values(o).filter(u=>V(u,"server_loader"));e.push(...l);const c=Object.values(o).filter(u=>V(u,"server_action"));t.push(...c)}}},V=(e,t)=>e&&typeof e=="function"&&e.__brand===t;function Ue(e,t){return async r=>{if(r.headersSent){r.exit();return}const{method:n}=r,a=I(r),i=L(r)==="dev",o=r[O];if(i&&n==="GET"&&r.query.has(K)&&console.warn(`Seems like you are submitting a Qwik Action via GET request. Qwik Actions should be submitted via POST request.
Make sure your <form> has method="POST" attribute, like this: <form method="POST">`),n==="POST"){const s=r.query.get(K);if(s){const l=globalThis._qwikActionsMap,c=t.find(u=>u.__id===s)??(l==null?void 0:l.get(s));if(c){r.sharedMap.set($,s);const u=await r.parseBody();if(!u||typeof u!="object")throw new Error("Expected request data to be an object");const d=await Y(r,c.__validators,u,i);if(!d.success)a[s]=r.fail(d.status??500,d.error);else{const m=i?await N(r,c.__qrl.getSymbol().split("_",1)[0],()=>c.__qrl.call(r,d.data,r)):await c.__qrl.call(r,d.data,r);i&&W(o,m,c.__qrl),a[s]=m}}}}e.length>0&&await Promise.all(e.map(s=>{const l=s.__id;return a[l]=Y(r,s.__validators,void 0,i).then(c=>c.success?i?N(r,s.__qrl.getSymbol().split("_",1)[0],()=>s.__qrl.call(r,r)):s.__qrl.call(r,r):r.fail(c.status??500,c.error)).then(c=>(typeof c=="function"?a[l]=c():(i&&W(o,c,s.__qrl),a[l]=c),c))}))}}async function Y(e,t,r,n){let a={success:!0,data:r};if(t)for(const i of t)if(n?a=await N(e,"validator$",()=>i.validate(e,r)):a=await i.validate(e,r),a.success)r=a.data;else return a;return a}function je(e){return e&&typeof e=="object"&&Symbol.asyncIterator in e}async function Fe(e){const t=e.query.get(He);if(t&&e.request.headers.get("X-QRL")===t&&e.request.headers.get("Content-Type")==="application/qwik-json"){e.exit();const r=L(e)==="dev",n=e[O],a=await e.parseBody();if(Array.isArray(a)){const[i,...o]=a;if(Xe(i)&&i.getHash()===t){let s;try{r?s=await N(e,`server_${i.getSymbol()}`,()=>i.apply(e,o)):s=await i.apply(e,o)}catch(l){e.headers.set("Content-Type","application/qwik-json"),e.send(500,await n._serializeData(l,!0));return}if(je(s)){e.headers.set("Content-Type","text/qwik-json-stream");const c=e.getWritableStream().getWriter();for await(const u of s){r&&W(n,u,i);const d=await n._serializeData(u,!0);if(e.signal.aborted)break;await c.write(v.encode(`${d}
`))}c.close()}else{W(n,s,i),e.headers.set("Content-Type","application/qwik-json");const l=await n._serializeData(s,!0);e.send(200,l)}return}}throw e.error(500,"Invalid request")}}function Be(e){const t=F(e),{basePathname:r,pathname:n,url:a,sharedMap:i}=e;if(!i.has(C)&&n!==r&&!n.endsWith(".html")){if(t){if(!n.endsWith("/"))throw e.redirect(302,n+"/"+a.search)}else if(n.endsWith("/"))throw e.redirect(302,n.slice(0,n.length-1)+a.search)}}function W(e,t,r){try{e._verifySerializable(t,void 0)}catch(n){throw n instanceof Error&&r.dev&&(n.loc=r.dev),n}}var Xe=e=>typeof e=="function"&&typeof e.getSymbol=="function";function Je(e){const t=e[e.length-1];return t&&typeof t.default=="function"}function oe(e,t){return e.pathname.endsWith(x)?e.pathname.slice(0,-x.length+(t?1:0))+e.search:e.pathname}var v=new TextEncoder;function Ke(e){if(Ze(e.request.headers,"application/x-www-form-urlencoded","multipart/form-data","text/plain")){const r=e.request.headers.get("origin"),n=e.url.origin;if(r!==n)throw e.error(403,`CSRF check failed. Cross-site ${e.method} form submissions are forbidden.
The request origin "${r}" does not match the server origin "${n}".`)}}function Ge(e){return async t=>{if(t.headersSent||t.sharedMap.has(C))return;t.request.headers.forEach((d,m)=>d);const n=t.headers;n.has("Content-Type")||n.set("Content-Type","text/html; charset=utf-8");const a=F(t),{readable:i,writable:o}=new TextEncoderStream,s=t.getWritableStream(),l=i.pipeTo(s,{preventClose:!0}),c=o.getWriter(),u=t.status();try{const d=L(t)==="static",m=Qe(t),h=await e({base:t.basePathname+"build/",stream:c,serverData:m,containerAttributes:{"q:render":d?"static":"",...m.containerAttributes}}),g={loaders:I(t),action:t.sharedMap.get($),status:u!==200?u:200,href:oe(t.url,a)};typeof h.html=="string"&&await c.write(h.html),t.sharedMap.set("qData",g)}finally{await c.ready,await c.close(),await l}await s.close()}}async function Ve(e){if(e.sharedMap.has(C)){try{await e.next()}catch(i){if(!(i instanceof P))throw i}if(e.headersSent)return;const r=e.status(),n=e.headers.get("Location");if(r>=301&&r<=308&&n){const i=qe(n);if(i){e.headers.set("Location",i),e.getWritableStream().close();return}else e.status(200),e.headers.delete("Location")}}}async function Ye(e){if(e.sharedMap.has(C)){if(await e.next(),e.headersSent||e.exited)return;const r=e.status(),n=e.headers.get("Location"),a=F(e);e.request.headers.forEach((c,u)=>c),e.headers.set("Content-Type","application/json; charset=utf-8");const i={loaders:I(e),action:e.sharedMap.get($),status:r!==200?r:200,href:oe(e.url,a),redirect:n??void 0},o=e.getWritableStream().getWriter(),l=await e[O]._serializeData(i,!0);o.write(v.encode(l)),e.sharedMap.set("qData",i),o.close()}}function qe(e){if(e.startsWith("/")){const t=x,r=new URL(e,"http://localhost");return(r.pathname.endsWith("/")?r.pathname.slice(0,-1):r.pathname)+(t.startsWith("/")?"":"/")+t+r.search}else return}function q(){return typeof performance<"u"?performance.now():0}async function N(e,t,r){const n=q();try{return await r()}finally{const a=q()-n;let i=e.sharedMap.get("@serverTiming");i||e.sharedMap.set("@serverTiming",i=[]),i.push([t,a])}}function Ze(e,...t){var r;const n=((r=e.get("content-type"))==null?void 0:r.split(/;,/,1)[0].trim())??"";return t.includes(n)}function Ee(e){const t=[];return e==="day"?e=60*60*24:e==="week"?e=60*60*24*7:e==="month"?e=60*60*24*30:e==="year"?e=60*60*24*365:e==="private"?e={private:!0,noCache:!0}:e==="immutable"?e={public:!0,immutable:!0,maxAge:60*60*24*365,staleWhileRevalidate:60*60*24*365}:e==="no-cache"&&(e={noCache:!0}),typeof e=="number"&&(e={maxAge:e,sMaxAge:e,staleWhileRevalidate:e}),e.immutable&&t.push("immutable"),e.maxAge&&t.push(`max-age=${e.maxAge}`),e.sMaxAge&&t.push(`s-maxage=${e.sMaxAge}`),e.noStore&&t.push("no-store"),e.noCache&&t.push("no-cache"),e.private&&t.push("private"),e.public&&t.push("public"),e.staleWhileRevalidate&&t.push(`stale-while-revalidate=${e.staleWhileRevalidate}`),e.staleIfError&&t.push(`stale-if-error=${e.staleIfError}`),t.join(", ")}var ce=Symbol("RequestEvLoaders"),le=Symbol("RequestEvMode"),fe=Symbol("RequestEvRoute"),O=Symbol("RequestEvQwikSerializer"),ue=Symbol("RequestEvTrailingSlash"),de="@routeName",$="@actionId",he="@actionFormData",et="@nonce";function tt(e,t,r,n,a,i,o,s){const{request:l,platform:c,env:u}=e,d=new Map,m=new Ie(l.headers.get("cookie")),h=new Headers,g=new URL(l.url);g.pathname.endsWith(x)&&(g.pathname=g.pathname.slice(0,-pe),a&&!g.pathname.endsWith("/")&&(g.pathname+="/"),d.set(C,!0)),d.set("@manifest",n);let y=-1,w=null,A,B=e.locale,S=200;const ge=async()=>{for(y++;y<r.length;){const f=r[y],p=f(R);p instanceof Promise&&await p,y++}},T=()=>{if(w!==null)throw new Error("Response already sent")},D=(f,p)=>{if(T(),typeof f=="number"){S=f;const M=R.getWritableStream().getWriter();M.write(typeof p=="string"?v.encode(p):p),M.close()}else if(S=f.status,f.headers.forEach((b,M)=>{h.append(M,b)}),f.body){const b=R.getWritableStream();f.body.pipeTo(b)}else{if(S>=300&&S<400)return new P;R.getWritableStream().getWriter().close()}return H()},H=()=>(y=Z,new j),Q={},R={[ce]:Q,[le]:e.mode,[ue]:a,[fe]:t,[O]:o,cookie:m,headers:h,env:u,method:l.method,signal:l.signal,params:(t==null?void 0:t[1])??{},pathname:g.pathname,platform:c,query:g.searchParams,request:l,url:g,basePathname:i,sharedMap:d,get headersSent(){return w!==null},get exited(){return y>=Z},get clientConn(){return e.getClientConn()},next:ge,exit:H,cacheControl:f=>{T(),h.set("Cache-Control",Ee(f))},resolveValue:async f=>{const p=f.__id;if(f.__brand==="server_loader"&&!(p in Q))throw new Error("You can not get the returned data of a loader that has not been executed for this request.");return Q[p]},status:f=>typeof f=="number"?(T(),S=f,f):S,locale:f=>(typeof f=="string"&&(B=f),B||""),error:(f,p)=>(S=f,h.delete("Cache-Control"),new ne(f,p)),redirect:(f,p)=>{if(T(),S=f,p){const b=p.replace(/([^:])\/{2,}/g,"$1/");p!==b&&console.warn(`Redirect URL ${p} is invalid, fixing to ${b}`),h.set("Location",b)}return h.delete("Cache-Control"),f>301&&h.set("Cache-Control","no-store"),H(),new P},defer:f=>typeof f=="function"?f:()=>f,fail:(f,p)=>(T(),S=f,h.delete("Cache-Control"),{failed:!0,...p}),text:(f,p)=>(h.set("Content-Type","text/plain; charset=utf-8"),D(f,p)),html:(f,p)=>(h.set("Content-Type","text/html; charset=utf-8"),D(f,p)),parseBody:async()=>A!==void 0?A:A=nt(R.request,d,o),json:(f,p)=>(h.set("Content-Type","application/json; charset=utf-8"),D(f,JSON.stringify(p))),send:D,isDirty:()=>w!==null,getWritableStream:()=>{if(w===null){if(e.mode==="dev"){const f=d.get("@serverTiming");f&&h.set("Server-Timing",f.map(p=>`${p[0]};dur=${p[1]}`).join(","))}w=e.getWritableStream(S,h,m,s,R)}return w}};return Object.freeze(R)}function I(e){return e[ce]}function F(e){return e[ue]}function rt(e){return e[fe]}function L(e){return e[le]}var Z=Number.MAX_SAFE_INTEGER,nt=async(e,t,r)=>{var n;const a=e.clone(),i=((n=e.headers.get("content-type"))==null?void 0:n.split(/[;,]/,1)[0].trim())??"";if(i==="application/x-www-form-urlencoded"||i==="multipart/form-data"){const o=await a.formData();return t.set(he,o),at(o)}else{if(i==="application/json")return await a.json();if(i==="application/qwik-json")return r._deserializeData(await a.text())}},at=e=>[...e.entries()].reduce((r,[n,a])=>(n.split(".").reduce((i,o,s,l)=>{if(o.endsWith("[]")){const c=o.slice(0,-2);return i[c]=i[c]||[],i[c]=[...i[c],a]}return s<l.length-1?i[o]=i[o]||(Number.isNaN(+l[s+1])?{}:[]):i[o]=a},r),r),{});function it(e,t,r,n,a=!0,i="/",o){let s;const l=new Promise(u=>s=u),c=tt(e,t,r,n,a,i,o,s);return{response:l,requestEv:c,completion:st(c,s)}}async function st(e,t){try{await e.next()}catch(r){if(r instanceof P)await e.getWritableStream().close();else if(r instanceof ne){if(console.error(r),!e.headersSent){const n=ke(r.status,r),a=r.status;e.html(a,n)}}else if(!(r instanceof j)){if(L(e)!=="dev")try{e.headersSent||(e.headers.set("content-type","text/html; charset=utf-8"),e.cacheControl({noCache:!0}),e.status(500));const n=e.getWritableStream();if(!n.locked){const a=n.getWriter();await a.write(v.encode(ae(500,"Internal Server Error"))),await a.close()}}catch{console.error("Unable to render error page")}return r}}finally{e.isDirty()||t(null)}}function ot(e,t){if(e.endsWith(x)){const r=e.length-pe+(t?1:0);e=e.slice(0,r),e===""&&(e="/")}return e}var C="@isQData",x="/q-data.json",pe=x.length;function ct(e,t){const r={};let n=te(e);const a=E(e);let i=te(t);const o=E(t);for(;n<a;){const s=e.charCodeAt(n++),l=t.charCodeAt(i++);if(s===91){const c=me(e,n),u=n+(c?3:0),d=z(e,u,a,93),m=e.substring(u,d),h=z(e,d+1,a,47),g=e.substring(d+1,h);n=d+1;const y=i-1,w=z(t,y,o,c?0:47,g);if(w==-1)return null;const A=t.substring(y,w);if(!c&&!g&&!A)return null;i=w,r[m]=decodeURIComponent(A)}else if(s!==l&&!(isNaN(l)&&lt(e,n)))return null}return ee(e,n)&&ee(t,i)?r:null}function lt(e,t){return e.charCodeAt(t)===91&&me(e,t+1)}function E(e){const t=e.length;return t>1&&e.charCodeAt(t-1)===47?t-1:t}function ee(e,t){const r=e.length;return t>=r||t==r-1&&e.charCodeAt(t)===47}function te(e){return e.charCodeAt(0)===47?1:0}function me(e,t){return e.charCodeAt(t)===46&&e.charCodeAt(t+1)===46&&e.charCodeAt(t+2)===46}function z(e,t,r,n,a=""){for(;t<r&&e.charCodeAt(t)!==n;)t++;const i=a.length;for(let o=0;o<i;o++)if(e.charCodeAt(t-i+o)!==a.charCodeAt(o))return-1;return t-i}var ft=async(e,t,r,n)=>{if(Array.isArray(e))for(const a of e){const i=a[0],o=ct(i,n);if(o){const s=a[1],l=a[3],c=new Array(s.length),u=[],d=ut(t,n);let m;return s.forEach((h,g)=>{re(h,u,y=>c[g]=y,r)}),re(d,u,h=>m=h==null?void 0:h.default,r),u.length>0&&await Promise.all(u),[i,o,c,m,l]}}return null},re=(e,t,r,n)=>{if(typeof e=="function"){const a=J.get(e);if(a)r(a);else{const i=e();typeof i.then=="function"?t.push(i.then(o=>{n!==!1&&J.set(e,o),r(o)})):i&&r(i)}}},ut=(e,t)=>{if(e){t=t.endsWith("/")?t:t+"/";const r=e.find(n=>n[0]===t||t.startsWith(n[0]+(t.endsWith("/")?"":"/")));if(r)return r[1]}};async function dt(e,t,r){const{render:n,qwikCityPlan:a,manifest:i,checkOrigin:o}=t,s=e.url.pathname,l=ot(s,a.trailingSlash),c=await ht(a,l,e.request.method,o??!0,n);return c?it(e,c[0],c[1],i,a.trailingSlash,a.basePathname,r):null}async function ht(e,t,r,n,a){const{routes:i,serverPlugins:o,menus:s,cacheModules:l}=e,c=await ft(i,s,l,t),u=ze(o,c,r,n,Ge(a));return u.length>0?[c,u]:null}var pt="x-vercel-ip-country",mt="x-real-ip";function gt(e){const t={_deserializeData:Se,_serializeData:be,_verifySerializable:Re};e.manifest&&Ae(e.manifest);async function r(n){try{const a=new URL(n.url);if(we(n.method,a))return new Response(null,{headers:{"x-middleware-next":"1"}});const i=(()=>globalThis.process)(),s=await dt({mode:"server",locale:void 0,url:a,request:n,env:{get(c){return i.env[c]}},getWritableStream:(c,u,d,m)=>{const{readable:h,writable:g}=new TransformStream,y=new Response(h,{status:c,headers:Le(u,d)});return m(y),g},platform:{},getClientConn:()=>({ip:n.headers.get(mt)??void 0,country:n.headers.get(pt)??void 0})},e,t);if(s){s.completion.then(u=>{u&&console.error(u)});const c=await s.response;if(c)return c}const l=ye(a.pathname);return new Response(l,{status:404,headers:{"Content-Type":"text/html; charset=utf-8","X-Not-Found":a.pathname}})}catch(a){return console.error(a),new Response(String(a||"Error"),{status:500,headers:{"Content-Type":"text/plain; charset=utf-8","X-Error":"vercel-edge"}})}}return r}const Rt=gt({render:xe,qwikCityPlan:_e,manifest:Te});export{Rt as default};
